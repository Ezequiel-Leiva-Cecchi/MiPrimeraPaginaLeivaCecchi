{% extends 'padre.html' %}

{% block title %}Inicio{% endblock %}

{% block content %}
<h2>Bienvenido al catálogo de películas</h2>

<div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px;">
  {% for pelicula in peliculas %}
    <div style="border: 1px solid #ccc; border-radius: 10px; width: 250px; padding: 15px; background: white;">
      {% if pelicula.imagen %}
        <img src="{{ pelicula.imagen.url }}" alt="{{ pelicula.titulo }}" style="width: 100%; height: auto; border-radius: 8px;">
      {% else %}
        <div style="width: 100%; height: 150px; background-color: #eee; display: flex; align-items: center; justify-content: center;">
          <span>Sin imagen</span>
        </div>
      {% endif %}
      <h3>{{ pelicula.titulo }}</h3>
      <p><strong>Estreno:</strong> {{ pelicula.fecha_lanzamiento }}</p>
      <p><strong>Géneros:</strong>
        {% for genero in pelicula.generos.all %}
          {{ genero.nombre }}{% if not forloop.last %}, {% endif %}
        {% endfor %}
      </p>
      <p>{{ pelicula.mini_resumen|truncatewords:20 }}</p>
    </div>
  {% empty %}
    <p>No hay películas disponibles.</p>
  {% endfor %}
</div>
{% endblock %}
